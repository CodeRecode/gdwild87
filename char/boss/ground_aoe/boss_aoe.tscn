[gd_scene load_steps=80 format=3 uid="uid://dfqkscqbkwm6t"]

[ext_resource type="Script" uid="uid://cmbyixxbsces4" path="res://particles/play_particle_systems.gd" id="1_41sfy"]
[ext_resource type="Script" uid="uid://dm2lkbmvj6m6g" path="res://char/boss/ground_aoe/boss_aoe.gd" id="1_oxy1x"]
[ext_resource type="Texture2D" uid="uid://d016b4rev7lcd" path="res://particles/beam01.png" id="2_b1jyr"]
[ext_resource type="Shader" uid="uid://bbmpkm4nu64jd" path="res://shaders/s_beamscroll.tres" id="3_fpjv4"]
[ext_resource type="Texture2D" uid="uid://c181x40bya0bh" path="res://particles/ground_indicator.png" id="3_sgh0x"]
[ext_resource type="Texture2D" uid="uid://cwlvxe1nas3oe" path="res://particles/my_beam_cylinder.png" id="4_la1dn"]
[ext_resource type="ArrayMesh" uid="uid://dw1wcd7lfldba" path="res://char/boss/ground_aoe/beam.obj" id="5_04jn1"]
[ext_resource type="Texture2D" uid="uid://pc6l8ydy1n6v" path="res://particles/empty_circle.png" id="6_g5rpe"]
[ext_resource type="Texture2D" uid="uid://cm2me1np1k33l" path="res://particles/flare.png" id="7_rcv38"]
[ext_resource type="Texture2D" uid="uid://dqk00ciciqmcu" path="res://particles/wavy_alpha.png" id="8_723jg"]
[ext_resource type="ArrayMesh" uid="uid://bf81s6irc1f1g" path="res://char/boss/ground_aoe/hemisphere.obj" id="9_62u8x"]
[ext_resource type="Texture2D" uid="uid://53cktcivat7s" path="res://particles/bigger_empty_circle.png" id="10_lgj8i"]
[ext_resource type="Script" uid="uid://i3tg6myj42l1" path="res://char/components/hitbox.gd" id="13_41sfy"]

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_8h1p3"]
transparency = 1
blend_mode = 1
cull_mode = 2
shading_mode = 0
vertex_color_use_as_albedo = true
vertex_color_is_srgb = true
albedo_color = Color(1, 0, 0.14901961, 1)
albedo_texture = ExtResource("2_b1jyr")

[sub_resource type="Curve" id="Curve_phx82"]
_data = [Vector2(0, 1), 0.0, 0.0, 0, 0, Vector2(0.566929, 0.405158), -4.02907, -4.02907, 0, 0, Vector2(1, 0), 0.0, 0.0, 0, 0]
point_count = 3

[sub_resource type="CurveTexture" id="CurveTexture_hxiss"]
curve = SubResource("Curve_phx82")

[sub_resource type="Curve" id="Curve_wbm30"]
_limits = [0.0, 100.0, 0.0, 1.0]
_data = [Vector2(0, 1), 0.0, 0.0, 0, 0, Vector2(0.818898, 55.6572), 274.709, 274.709, 0, 0, Vector2(1, 100), 0.0, 0.0, 0, 0]
point_count = 3

[sub_resource type="CurveTexture" id="CurveTexture_62xwb"]
curve = SubResource("Curve_wbm30")

[sub_resource type="Curve" id="Curve_1aicl"]
_limits = [1.0, 10.0, 0.0, 1.0]
_data = [Vector2(0, 10), 0.0, 0.0, 0, 0, Vector2(1, 1), 0.0, 0.0, 0, 0]
point_count = 2

[sub_resource type="CurveTexture" id="CurveTexture_3ldrp"]
curve = SubResource("Curve_1aicl")

[sub_resource type="Curve" id="Curve_gktvk"]
_data = [Vector2(0, 1), 0.0, 0.0, 0, 0, Vector2(0.397638, 0.664725), -3.29651, -3.29651, 0, 0, Vector2(1, 0), 0.0, 0.0, 0, 0]
point_count = 3

[sub_resource type="CurveTexture" id="CurveTexture_gnb3e"]
curve = SubResource("Curve_gktvk")

[sub_resource type="ParticleProcessMaterial" id="ParticleProcessMaterial_ufqdh"]
particle_flag_align_y = true
emission_shape = 2
emission_sphere_radius = 3.0
gravity = Vector3(0, 0, 0)
radial_accel_min = -13.0
radial_accel_max = -8.0
radial_accel_curve = SubResource("CurveTexture_3ldrp")
damping_min = 3.0
damping_max = 3.0
damping_curve = SubResource("CurveTexture_62xwb")
scale_min = 0.5
scale_curve = SubResource("CurveTexture_gnb3e")
color = Color(1, 0.24313726, 0.39215687, 1)
alpha_curve = SubResource("CurveTexture_hxiss")

[sub_resource type="QuadMesh" id="QuadMesh_ulx4j"]
size = Vector2(0.2, 1)

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_oxy1x"]
transparency = 1
blend_mode = 1
shading_mode = 0
vertex_color_use_as_albedo = true
albedo_texture = ExtResource("3_sgh0x")

[sub_resource type="ParticleProcessMaterial" id="ParticleProcessMaterial_la1dn"]
gravity = Vector3(0, 0, 0)
scale_min = 5.0
scale_max = 5.0
color = Color(2.0002677, 0.5196957, 0.81581044, 1)

[sub_resource type="QuadMesh" id="QuadMesh_xvvcx"]

[sub_resource type="Gradient" id="Gradient_ulx4j"]

[sub_resource type="GradientTexture2D" id="GradientTexture2D_xvvcx"]
gradient = SubResource("Gradient_ulx4j")
height = 128
fill_from = Vector2(1, 0)
fill_to = Vector2(1, 1)
repeat = 1

[sub_resource type="ShaderMaterial" id="ShaderMaterial_ood17"]
render_priority = 0
shader = ExtResource("3_fpjv4")
shader_parameter/Speed = Vector2(0.4, -1.5)
shader_parameter/MainTex = ExtResource("4_la1dn")
shader_parameter/Mask = SubResource("GradientTexture2D_xvvcx")

[sub_resource type="Curve" id="Curve_ulx4j"]
_data = [Vector2(0, 0), 0.0, 3.46804, 0, 0, Vector2(1, 1), 0.0, 0.0, 0, 0]
point_count = 2

[sub_resource type="CurveTexture" id="CurveTexture_xvvcx"]
curve = SubResource("Curve_ulx4j")

[sub_resource type="Curve" id="Curve_t2tgn"]
_data = [Vector2(0, 1), 0.0, 0.0, 0, 0, Vector2(0.354331, 0.675541), -1.06831, -1.06831, 0, 0, Vector2(1, 0), 0.0, 0.0, 0, 0]
point_count = 3

[sub_resource type="Curve" id="Curve_hxiss"]
_data = [Vector2(0, 0.578203), 0.0, 1.71693, 0, 0, Vector2(1, 1), 0.0, 0.0, 0, 0]
point_count = 2

[sub_resource type="CurveXYZTexture" id="CurveXYZTexture_wbm30"]
curve_x = SubResource("Curve_t2tgn")
curve_y = SubResource("Curve_hxiss")
curve_z = SubResource("Curve_t2tgn")

[sub_resource type="ParticleProcessMaterial" id="ParticleProcessMaterial_5v1rf"]
gravity = Vector3(0, 0, 0)
scale_min = 2.0
scale_max = 2.0
scale_curve = SubResource("CurveXYZTexture_wbm30")
color = Color(0.9019608, 0.21176471, 0.3529412, 1)
alpha_curve = SubResource("CurveTexture_xvvcx")

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_ulx4j"]
transparency = 1
blend_mode = 1
cull_mode = 2
shading_mode = 0
vertex_color_use_as_albedo = true
vertex_color_is_srgb = true
albedo_color = Color(1, 0.24000001, 0.3920002, 1)
albedo_texture = ExtResource("6_g5rpe")

[sub_resource type="Curve" id="Curve_62xwb"]
_data = [Vector2(0, 0), 0.0, 4.23548, 0, 0, Vector2(1, 1), 0.0, 0.0, 0, 0]
point_count = 2

[sub_resource type="CurveTexture" id="CurveTexture_1aicl"]
curve = SubResource("Curve_62xwb")

[sub_resource type="CurveTexture" id="CurveTexture_gktvk"]
curve = SubResource("Curve_t2tgn")

[sub_resource type="ParticleProcessMaterial" id="ParticleProcessMaterial_gnb3e"]
gravity = Vector3(0, 0, 0)
scale_min = 5.0
scale_max = 5.0
scale_curve = SubResource("CurveTexture_gktvk")
color = Color(1, 1.5, 2, 1)
alpha_curve = SubResource("CurveTexture_1aicl")

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_phx82"]
transparency = 1
blend_mode = 1
shading_mode = 0
vertex_color_use_as_albedo = true
vertex_color_is_srgb = true
albedo_color = Color(1.5, 2, 2.5, 1)
albedo_texture = ExtResource("7_rcv38")
billboard_mode = 3
billboard_keep_scale = true
particles_anim_h_frames = 1
particles_anim_v_frames = 1
particles_anim_loop = false
proximity_fade_enabled = true

[sub_resource type="Curve" id="Curve_ood17"]
_limits = [-360.0, 360.0, 0.0, 1.0]
_data = [Vector2(0, 1), 0.0, 0.0, 0, 0, Vector2(1, 1), 0.0, 0.0, 0, 0]
point_count = 2

[sub_resource type="CurveTexture" id="CurveTexture_t2tgn"]
curve = SubResource("Curve_ood17")

[sub_resource type="Curve" id="Curve_3ldrp"]
_data = [Vector2(0, 0), 0.0, 0.0, 0, 0, Vector2(0.503937, 1), 0.0, 0.0, 0, 0, Vector2(1, 0), 0.0, 0.0, 0, 0]
point_count = 3

[sub_resource type="CurveTexture" id="CurveTexture_ood17"]
curve = SubResource("Curve_3ldrp")

[sub_resource type="ParticleProcessMaterial" id="ParticleProcessMaterial_in5cj"]
angle_min = -360.0
angle_max = 360.0
angle_curve = SubResource("CurveTexture_t2tgn")
gravity = Vector3(0, 0, 0)
scale_min = 6.0
scale_max = 10.0
scale_curve = SubResource("CurveTexture_ood17")
color = Color(2.5, 0.66, 1.028, 1)

[sub_resource type="QuadMesh" id="QuadMesh_2cfjd"]

[sub_resource type="Curve" id="Curve_gnb3e"]
_data = [Vector2(0, 1), 0.0, 0.0, 0, 0, Vector2(0.405512, 1), 0.0, 0.0, 0, 0, Vector2(0.559055, 0.65391), -4.02907, -4.02907, 0, 0, Vector2(1, 0), 0.0, 0.0, 0, 0]
point_count = 4

[sub_resource type="CurveTexture" id="CurveTexture_5v1rf"]
curve = SubResource("Curve_gnb3e")

[sub_resource type="Curve" id="Curve_in5cj"]
_limits = [0.0, 100.0, 0.0, 1.0]
_data = [Vector2(0, 1), 0.0, 0.0, 0, 0, Vector2(1, 49.1681), 0.0, 0.0, 0, 0]
point_count = 2

[sub_resource type="CurveTexture" id="CurveTexture_2cfjd"]
curve = SubResource("Curve_in5cj")

[sub_resource type="Curve" id="Curve_g1y1x"]
_data = [Vector2(0, 1), 0.0, 0.0, 0, 0, Vector2(1, 0.232113), 0.0, 0.0, 0, 0]
point_count = 2

[sub_resource type="Curve" id="Curve_l7wog"]
_limits = [0.0, 4.0, 0.0, 1.0]
_data = [Vector2(0.26378, 4), 0.0, 0.0, 0, 0, Vector2(1, 1), 0.0, 0.0, 0, 0]
point_count = 2

[sub_resource type="Curve" id="Curve_v47a2"]
_data = [Vector2(0, 1), 0.0, 0.0, 0, 0, Vector2(1, 1), 0.0, 0.0, 0, 0]
point_count = 2

[sub_resource type="CurveXYZTexture" id="CurveXYZTexture_sotto"]
curve_x = SubResource("Curve_g1y1x")
curve_y = SubResource("Curve_l7wog")
curve_z = SubResource("Curve_v47a2")

[sub_resource type="ParticleProcessMaterial" id="ParticleProcessMaterial_cojs8"]
particle_flag_align_y = true
spread = 180.0
initial_velocity_min = 5.0
initial_velocity_max = 25.0
gravity = Vector3(0, 0, 0)
damping_min = 0.3
damping_max = 0.7
damping_curve = SubResource("CurveTexture_2cfjd")
scale_min = 0.2
scale_max = 0.3
scale_curve = SubResource("CurveXYZTexture_sotto")
color = Color(1.5, 3, 4, 1)
alpha_curve = SubResource("CurveTexture_5v1rf")

[sub_resource type="QuadMesh" id="QuadMesh_f3guv"]
size = Vector2(0.8, 1.3)

[sub_resource type="Gradient" id="Gradient_1aicl"]

[sub_resource type="GradientTexture2D" id="GradientTexture2D_3ldrp"]
gradient = SubResource("Gradient_1aicl")
fill_from = Vector2(1, 1)
repeat = 1

[sub_resource type="ShaderMaterial" id="ShaderMaterial_hxiss"]
render_priority = 0
shader = ExtResource("3_fpjv4")
shader_parameter/Speed = Vector2(0.5, 0.8)
shader_parameter/MainTex = ExtResource("8_723jg")
shader_parameter/Mask = SubResource("GradientTexture2D_3ldrp")

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_wbm30"]
next_pass = SubResource("ShaderMaterial_hxiss")
transparency = 1
blend_mode = 1
shading_mode = 0
vertex_color_use_as_albedo = true
vertex_color_is_srgb = true
albedo_color = Color(1, 2, 2.5, 0.519)

[sub_resource type="Curve" id="Curve_5v1rf"]
_data = [Vector2(0, 1), 0.0, 0.0, 0, 0, Vector2(0.492126, 0.989185), 0.0, 0.0, 0, 0, Vector2(0.948819, 0), 0.0, 0.0, 0, 0]
point_count = 3

[sub_resource type="CurveTexture" id="CurveTexture_in5cj"]
curve = SubResource("Curve_5v1rf")

[sub_resource type="Gradient" id="Gradient_2cfjd"]
offsets = PackedFloat32Array(0.192982, 0.416667, 1)
colors = PackedColorArray(0, 0, 0, 1, 0.302013, 0.302013, 0.302013, 1, 1, 1, 1, 1)

[sub_resource type="GradientTexture1D" id="GradientTexture1D_g1y1x"]
gradient = SubResource("Gradient_2cfjd")

[sub_resource type="Curve" id="Curve_sotto"]
_data = [Vector2(0, 0), 0.0, 3.27537, 0, 0, Vector2(1, 1), 0.0, 0.0, 0, 0]
point_count = 2

[sub_resource type="CurveTexture" id="CurveTexture_cojs8"]
curve = SubResource("Curve_sotto")

[sub_resource type="ParticleProcessMaterial" id="ParticleProcessMaterial_62xwb"]
gravity = Vector3(0, 0, 0)
scale_min = 1.5
scale_max = 1.5
scale_curve = SubResource("CurveTexture_cojs8")
color = Color(1, 0.24000001, 0.3920002, 1)
color_ramp = SubResource("GradientTexture1D_g1y1x")
alpha_curve = SubResource("CurveTexture_in5cj")

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_f3guv"]
transparency = 1
blend_mode = 1
cull_mode = 2
shading_mode = 0
vertex_color_use_as_albedo = true
vertex_color_is_srgb = true
albedo_texture = ExtResource("10_lgj8i")

[sub_resource type="Curve" id="Curve_jy738"]
_data = [Vector2(0, 0.956739), 0.0, -0.915696, 0, 0, Vector2(1, 0), 0.0, 0.0, 0, 0]
point_count = 2

[sub_resource type="CurveTexture" id="CurveTexture_r14g7"]
curve = SubResource("Curve_jy738")

[sub_resource type="Gradient" id="Gradient_s6dp4"]
colors = PackedColorArray(1, 1, 1, 1, 0, 0, 0, 1)

[sub_resource type="GradientTexture1D" id="GradientTexture1D_3xb71"]
gradient = SubResource("Gradient_s6dp4")

[sub_resource type="Curve" id="Curve_mok75"]
_data = [Vector2(0, 0.0590682), 0.0, 2.50821, 0, 0, Vector2(1, 1), 0.0, 0.0, 0, 0]
point_count = 2

[sub_resource type="CurveTexture" id="CurveTexture_du5ag"]
curve = SubResource("Curve_mok75")

[sub_resource type="ParticleProcessMaterial" id="ParticleProcessMaterial_2s3td"]
gravity = Vector3(0, 0, 0)
scale_min = 10.0
scale_max = 10.0
scale_curve = SubResource("CurveTexture_du5ag")
color = Color(2.0002677, 0.5196957, 0.81581044, 1)
color_ramp = SubResource("GradientTexture1D_3xb71")
alpha_curve = SubResource("CurveTexture_r14g7")

[sub_resource type="QuadMesh" id="QuadMesh_2dm04"]

[sub_resource type="CapsuleShape3D" id="CapsuleShape3D_b1jyr"]
radius = 2.2
height = 10.0

[node name="BossAoE" type="Node3D"]
script = ExtResource("1_oxy1x")

[node name="Particles" type="Node3D" parent="."]
unique_name_in_owner = true
script = ExtResource("1_41sfy")
delays = {
&"AnticipationAir": 0.0,
&"AnticipationGround": 0.0,
&"Beam": 1.0,
&"Flare": 1.5,
&"GroundCircle": 1.0,
&"Hemisphere": 1.55,
&"ImpactParticles": 1.5,
&"ShockwaveGround": 1.55
}

[node name="AnticipationAir" type="GPUParticles3D" parent="Particles"]
material_override = SubResource("StandardMaterial3D_8h1p3")
emitting = false
amount = 30
lifetime = 1.6
one_shot = true
fixed_fps = 60
process_material = SubResource("ParticleProcessMaterial_ufqdh")
draw_pass_1 = SubResource("QuadMesh_ulx4j")

[node name="AnticipationGround" type="GPUParticles3D" parent="Particles"]
transform = Transform3D(1, 0, 0, 0, -4.37114e-08, 1, 0, -1, -4.37114e-08, 0, 0, 0)
material_override = SubResource("StandardMaterial3D_oxy1x")
emitting = false
amount = 1
lifetime = 1.6
one_shot = true
fixed_fps = 60
process_material = SubResource("ParticleProcessMaterial_la1dn")
draw_pass_1 = SubResource("QuadMesh_xvvcx")

[node name="Beam" type="GPUParticles3D" parent="Particles"]
material_override = SubResource("ShaderMaterial_ood17")
emitting = false
amount = 1
lifetime = 0.6
one_shot = true
fixed_fps = 60
process_material = SubResource("ParticleProcessMaterial_5v1rf")
draw_pass_1 = ExtResource("5_04jn1")

[node name="GroundCircle" type="GPUParticles3D" parent="Particles"]
transform = Transform3D(1, 0, 0, 0, -4.37114e-08, 1, 0, -1, -4.37114e-08, 0, 0, 0)
material_override = SubResource("StandardMaterial3D_ulx4j")
emitting = false
amount = 1
lifetime = 0.6
one_shot = true
fixed_fps = 60
process_material = SubResource("ParticleProcessMaterial_gnb3e")
draw_pass_1 = SubResource("QuadMesh_xvvcx")

[node name="Flare" type="GPUParticles3D" parent="Particles"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.5, 0)
material_override = SubResource("StandardMaterial3D_phx82")
emitting = false
amount = 2
lifetime = 0.2
one_shot = true
explosiveness = 1.0
fixed_fps = 60
process_material = SubResource("ParticleProcessMaterial_in5cj")
draw_pass_1 = SubResource("QuadMesh_2cfjd")

[node name="ImpactParticles" type="GPUParticles3D" parent="Particles"]
material_override = SubResource("StandardMaterial3D_8h1p3")
emitting = false
amount = 30
lifetime = 0.7
one_shot = true
explosiveness = 1.0
randomness = 1.0
fixed_fps = 60
process_material = SubResource("ParticleProcessMaterial_cojs8")
draw_pass_1 = SubResource("QuadMesh_f3guv")

[node name="Hemisphere" type="GPUParticles3D" parent="Particles"]
material_override = SubResource("StandardMaterial3D_wbm30")
emitting = false
amount = 1
lifetime = 0.5
one_shot = true
fixed_fps = 60
process_material = SubResource("ParticleProcessMaterial_62xwb")
draw_pass_1 = ExtResource("9_62u8x")

[node name="ShockwaveGround" type="GPUParticles3D" parent="Particles"]
transform = Transform3D(1, 0, 0, 0, -4.37114e-08, 1, 0, -1, -4.37114e-08, 0, 0, 0)
material_override = SubResource("StandardMaterial3D_f3guv")
emitting = false
amount = 1
one_shot = true
fixed_fps = 60
process_material = SubResource("ParticleProcessMaterial_2s3td")
draw_pass_1 = SubResource("QuadMesh_2dm04")

[node name="DamageTimer" type="Timer" parent="."]
unique_name_in_owner = true
wait_time = 1.6
one_shot = true
autostart = true

[node name="QueueFreeTimer" type="Timer" parent="."]
unique_name_in_owner = true
wait_time = 2.55
one_shot = true
autostart = true

[node name="Hitbox" type="Area3D" parent="."]
collision_layer = 128
monitoring = false
script = ExtResource("13_41sfy")
damage = 1.0
metadata/_custom_type_script = "uid://i3tg6myj42l1"

[node name="CollisionShape3D" type="CollisionShape3D" parent="Hitbox"]
shape = SubResource("CapsuleShape3D_b1jyr")
